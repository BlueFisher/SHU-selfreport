# ä¸Šæµ·å¤§å­¦å¥åº·ä¹‹è·¯æ¯æ—¥ä¸€æŠ¥/æ¯æ—¥ä¸¤æŠ¥è‡ªåŠ¨æ‰“å¡

**ä½¿ç”¨seleniumæäº¤è¡¨å•ï¼ˆæµ‹è¯•ä¸­ï¼‰ï¼Œè‡ªåŠ¨ç”Ÿæˆè¡Œç¨‹ç ï¼ˆç›®å‰å‘ç°è¡Œç¨‹ç åªéœ€è¦å›¾ç‰‡ä¸­æœ‰æ—¥æœŸæ–‡å­—ï¼Œä¸”å›¾ç‰‡é•¿å®½æ¯”ä¸æ‰‹æœºå·®ä¸å¤šå°±è¡Œï¼‰**

**é€‚é…2022-02-19ç‰ˆï¼Œå¯ä»¥ä½¿ç”¨serveré…±æ¨é€å¡«æŠ¥ä¿¡æ¯ï¼Œsecretå¡«å†™æœ‰æ‰€æ”¹åŠ¨**

**é€‚é…2022-01-15ç‰ˆï¼Œå¢åŠ éšç”³ç ã€‚è¯·çœŸå®æäº¤éšç”³ç ä¸è¡Œç¨‹ç ã€‚ä¸ä¿¡è°£ä¸ä¼ è°£ï¼**

**é€‚é…2021-11-05ç‰ˆï¼ŒDangSZS**

**é€‚é…2021-11-04ç‰ˆï¼Œä¿®å¤äº†ShiFSHå­—æ®µ [issue 51](https://github.com/BlueFisher/SHU-selfreport/issues/51)ï¼Œå»é™¤éšç”³ç ï¼Œä¸°å¯Œæ—¥å¿—è®°å½•ï¼Œè‹¥å‡ºç°é”™è¯¯ï¼Œå¯ä»¥å½“å¤©çœŸå®æäº¤ä¸€æ¬¡ï¼Œç­‰ç¬¬äºŒå¤©å†è§‚å¯Ÿ**

**é€‚é…2021-10-08ç‰ˆï¼Œè·å–å½“å¤©çš„éšç”³ç ã€è¡Œç¨‹ç ã€‚è¯·çœŸå®åœ°æäº¤ä¸€æ¬¡éšç”³ç ã€è¡Œç¨‹ç ï¼Œåç»­ä¼šè‡ªåŠ¨é‡‡ç”¨ä¹‹å‰ä¸Šä¼ çš„éšç”³ç ã€è¡Œç¨‹ç **

**é€‚é…2021-06-28ç‰ˆï¼Œæ›´æ–°github actionçš„è‡ªåŠ¨æ‰“å¡æ—¶é—´**

**é€‚é…2021-04-24ç‰ˆï¼Œæš‚ä¸æ”¯æŒå…šå²çŸ¥è¯†å¤©å¤©å­¦**

ç¨‹åºä¸ºpythonè„šæœ¬æ–‡ä»¶ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ç›¸å…³ä¿¡æ¯ï¼Œè®¾ç½®åå°è¿è¡Œè„šæœ¬ï¼Œè„šæœ¬ä¼šæ ¹æ®é…ç½®æ–‡ä»¶ä¿¡æ¯è‡ªåŠ¨è¿›è¡Œæ¯æ—¥ä¸€æŠ¥/æ¯æ—¥ä¸¤æŠ¥ã€‚

æ”¯æŒgithub actionsæœåŠ¡å™¨ã€‚

æ”¯æŒä¸€é”®è¡¥æŠ¥åŠŸèƒ½ã€‚

æ”¯æŒæ¯æ—¥ä¸€æŠ¥/æ¯æ—¥ä¸¤æŠ¥ã€‚ç›®å‰åœ¨æ—©9æ™š9å„è‡ªåŠ¨å¡«æŠ¥ä¸€æ¬¡ã€‚

ä¸ºäº†é¿å…è¿‡å¤šçš„é…ç½®ï¼Œæ„Ÿè°¢[@Lanszhang131](https://github.com/Lanszhang131/DailyReport_SHU)çš„æ€è·¯ï¼Œ**åˆ©ç”¨å‰ä¸€å¤©çš„æŠ¥é€ä¿¡æ¯è¿›è¡Œå¡«æŠ¥ï¼Œæ‰€ä»¥å¦‚æœä½ çœŸå®åœ°æäº¤è¿‡ä¸€æ¬¡ï¼Œé‚£æ¯å¤©ä¼šé‡å¤å¡«æŠ¥ã€‚ç”±äºé»˜è®¤æ˜¯æ—©9æ™š9å¡«æŠ¥ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³ç”¨çœŸå®ä¿¡æ¯çš„è¯ç¬¬ä¸€æ¬¡åœ¨æ™šä¸Š9ç‚¹å¡«æŠ¥åä¿®æ”¹ä¸‹ä¿¡æ¯ã€‚**

## å…è´£ç”³æ˜

æœ¬é¡¹ç›®ä»…åšå…è´¹çš„å­¦æœ¯äº¤æµä½¿ç”¨ã€‚

## ç”¨æ³•

### 0. â­Starâ­é¡¹ç›®ğŸ˜‰

å¦‚æœä½ æƒ³è·å–æœ€æ–°çš„æ›´æ–°ï¼Œè®°å¾—å³ä¸Šè§’çš„`watch`

### 1. ä½ æœ‰æœåŠ¡å™¨ï¼Œåªåœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šè¿›è¡Œè‡ªåŠ¨æ‰“å¡

åœ¨ `config.yaml` ä¸­è®¾ç½®æ‰€æœ‰éœ€è¦æ‰“å¡çš„å­¦å·å¯†ç ï¼Œè‹¥ä¸ä½¿ç”¨Serveré…±è¿›è¡Œæ¨é€ï¼Œè¯·å°†`sendkey`ä¸€é¡¹å€¼è®¾ç½®ä¸º`"no"`

é’ˆå¯¹Ubuntuï¼Œç¼–è¾‘å®šæ—¶æ‰§è¡Œç¨‹åºcron

```bash
crontab -e
```

åŠ å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# ç¨‹åºæ¯å¤©4ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶å°†ç»“æœè¾“å‡ºè‡³shu_report.log
# æ³¨æ„pythonçš„è·¯å¾„ï¼Œmain.pyä¸è¾“å‡ºæ—¥å¿—shu_report.logçš„ç»å¯¹è·¯å¾„
0 4 * * * python -u /xxx/main.py 2>&1 >> /xxx/shu_report.log
```

å¦‚æœä½ æœåŠ¡å™¨æ˜¯UTCæ—¶åŒºï¼Œåˆ™ä¸º

```bash
0 20 * * * python -u /xxx/main.py 2>&1 >> /xxx/shu_report.log
```

å¦‚æœä½ ä¸ç¡®å®šä½ æœåŠ¡å™¨çš„æ—¶åŒºï¼Œä¹Ÿå¯ä»¥æ¯å°æ—¶è¿è¡Œä¸€æ¬¡ï¼š

```bash
0 * * * * python -u /xxx/main.py 2>&1 >> /xxx/shu_report.log
```

### 2. ä½ æ²¡æœ‰æœåŠ¡å™¨ï¼Œä½¿ç”¨ github actionsï¼ˆæ¨èï¼‰

#### ä½ ç¬¬ä¸€æ¬¡Fork

1. fork è¯¥ä»“åº“è‡³ä½ çš„ä»“åº“ä¸‹
2. å®šä½åˆ°ä½ çš„ä»“åº“çš„`Settings`çš„`Secrets`é€‰é¡¹å¡
3. æ·»åŠ secretï¼ˆNew repository secretï¼‰

`NAME` è®¾ç½®ä¸º `USERS`

`VALUE` è®¾ç½®ä¸º `å­¦å·1,å¯†ç 1,no;å­¦å·2,å¯†ç 2,no` çš„æ ¼å¼ï¼Œæ³¨æ„é€—å·ä¸åˆ†å·çš„åŒºåˆ†ï¼Œå­¦å·å¯†ç ä¹‹é—´ç”¨é€—å·ï¼Œæ¯ä¸¤ä¸ªå­¦å·ä¹‹é—´ç”¨åˆ†å·ï¼Œå¿…é¡»æ˜¯è‹±æ–‡åŠè§’ç¬¦å·ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå­¦å·å¯†ç åˆ™ä¸éœ€è¦åŠ åˆ†å·

`no`ä¸ºä½¿ç”¨Serveré…±æ¨é€Sendkeyçš„å ä½ç¬¦ï¼Œä¸ä½¿ç”¨å¯ä»¥æ— è§†

![](images/secrets.png)

4. å®šä½åˆ°ä½ ä»“åº“ä¸‹çš„ `Actions` é€‰é¡¹å¡ï¼Œç‚¹å‡» `Enable workflow`

![](images/enable_actions.png)

5. æ­¤æ—¶Actions å·²ç»å¯åŠ¨å®Œæˆï¼Œæ¯å¤©ä¸Šåˆå…«ç‚¹ï¼ˆUTC+8ï¼‰å’Œæ™šä¸Šå…«ç‚¹å„æ‰§è¡Œä¸€æ¬¡ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡ä¼šåœ¨ `Actions` é€‰é¡¹å¡ä¸‹ç”Ÿæˆä¸€ä¸ªæŠ¥å‘Šã€‚

   å¦‚æœéœ€è¦å¯¹æŠ¥é€åŠŸèƒ½è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥ç‚¹å‡» `run workflow` æŒ‰é’®ï¼Œç«‹å³è¿›è¡Œä¸€æ¬¡è¿è¡Œã€‚

   ![](images/run_workflow.png)

![](images/actions.png)


#### ä½ ç¬¬äºŒæ¬¡Forkï¼Œè¦æ›´æ–°åŸå…ˆå†…å®¹

1. ç‚¹å‡» `Fetch upstream`

![](images/fetch_upstream_01.png)

2. ç‚¹å‡» `Fetch and merge`

![](images/fetch_upstream_02.png)

## ä½¿ç”¨Serveré…±æ¨é€

ä»€ä¹ˆæ˜¯Serveré…±ï¼Ÿ

ã€ŒServeré…±ã€ï¼Œè‹±æ–‡åã€ŒServerChanã€ï¼Œæ˜¯ä¸€æ¬¾ã€Œæ‰‹æœºã€å’Œã€ŒæœåŠ¡å™¨ã€ã€ã€Œæ™ºèƒ½è®¾å¤‡ã€ä¹‹é—´çš„é€šä¿¡è½¯ä»¶ã€‚ è¯´äººè¯ï¼Ÿå°±æ˜¯ä»æœåŠ¡å™¨ã€è·¯ç”±å™¨ç­‰è®¾å¤‡ä¸Šæ¨æ¶ˆæ¯åˆ°æ‰‹æœºçš„å·¥å…·ã€‚

### ç™»å½•ã€ŒServeré…±ã€å®˜ç½‘

[å®˜ç½‘ä¼ é€é—¨](https://sct.ftqq.com/login)  

### å¾®ä¿¡æ‰«ç å…³æ³¨åç‚¹å‡»ç»§ç»­  

![image_1641818508926.png](https://s2.loli.net/2022/01/10/vp7Hbr2zMix4CUA.png)

### é€‰æ‹© SendKey é€‰é¡¹å¡ï¼Œç‚¹å‡»å¤åˆ¶  

å¤åˆ¶ä¿ç•™ Sendkey
![image_1641818664055.png](https://s2.loli.net/2022/01/10/98HgAE2TnktKZvq.png)

å°†å‰æ–‡å¯¹åº”çš„`no`ï¼Œæ›¿æ¢ä¸ºè·å¾—çš„Sendkeyå³å¯

### æ¨é€æ•ˆæœå¦‚ä¸‹

![](images/serverchan_result.jpg)

## ä¾èµ–

- python3
- ä¾èµ–ï¼š
  - pyyaml
  - beautifulsoup4
  - requests
  - selenium
  - pillow

## æ„Ÿè°¢

æ„Ÿè°¢å„ä½ contributors æ‰€åšçš„è´¡çŒ®ã€‚

